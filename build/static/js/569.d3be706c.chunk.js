"use strict";(self.webpackChunktred_code_portal=self.webpackChunktred_code_portal||[]).push([[569],{33569:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var r=a(65043),o=a(49760),n=a(81683),i=a(18599),s=a(54),d=a(48073),l=a(98112),c=a(43613),g=a(16543),p=a(97851),h=a(47375),u=a(47084),x=a(34562),f=a(54833),m=a(96094),y=a(39155),w=a(86064),v=a(50585),A=a(27273),j=a(96311),b=a(40632),C=a(70579);const T=e=>{let{loginUsersData:t=[],columns:a=[]}=e;const[o,n]=r.useState(20);if(0===t.length)return(0,C.jsx)(f.A,{title:"No Data Found"});return(0,C.jsx)(b.A,{sx:{height:"580px",width:"100%","& .super-app-theme--cell":{backgroundColor:"rgba(224, 183, 60, 0.55)",color:"#1a3e72",fontWeight:"600"},"& .super-app.negative":{color:"#f35631",fontWeight:"600"},"& .super-app.positive":{color:"#10b983",fontWeight:"600"}},children:(0,C.jsx)(j.z,{rows:t,disableColumnSelector:!0,columns:a,isRowSelectable:e=>e.id,components:{Toolbar:function(){return(0,C.jsxs)(m.b,{sx:{padding:"1px"},children:[(0,C.jsx)(y.j,{sx:{padding:"14px"},onResize:void 0,nonce:void 0,onResizeCapture:void 0}),(0,C.jsx)(w.Q,{sx:{padding:"14px"},onResize:void 0,nonce:void 0,onResizeCapture:void 0}),(0,C.jsx)(v.z,{sx:{padding:"14px"},onResize:void 0,nonce:void 0,onResizeCapture:void 0}),(0,C.jsx)(A.qn,{sx:{padding:"14px"}})]})}},density:"compact",pageSize:o,onPageSizeChange:e=>n(e),getRowId:e=>e.id,rowsPerPageOptions:[5,10,20,100]})})};var R=a(51425),D=a(14161);const S=(0,R.$)();var k=a(48625),L=a(11504),M=a(90637),N=a(71948),F=a(73876);const P=()=>{const e=[{field:"isTradeEnabled",headerName:"Trading",width:250,renderCell:e=>e.row.isTradeEnabled?(0,C.jsx)(i.A,{sx:{padding:"1px 6px",borderRadius:"5px",backgroundColor:"#1fa91f",color:"#ffff",borderColor:"ffff"},variant:"outlined",onClick:()=>P(e.row),children:"Trading is On"}):(0,C.jsx)(i.A,{sx:{padding:"1px 6px",borderRadius:"5px",backgroundColor:"#e33838",color:"#ffff",borderColor:"ffff"},variant:"outlined",onClick:()=>P(e.row),children:"Trading is Off"})},{field:"clientId",headerName:"Client Code",width:250,align:"left"},{field:"name",headerName:"Client Name",width:250,align:"left"},{field:"loginDateAndTime",headerName:"Login Date Time",headerAlign:"center",width:310,align:"left",valueGetter:e=>{const t=new Date(e.row.loginDateAndTime);let a=t.getHours(),r=t.getMinutes();var o=a>=12?"pm":"am";return a%=12,a=a||12,r=r<10?0+r:r,t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+"  "+a+":"+(r<10?"0":"")+r+" "+o}},{field:"Action",headerName:"Action",width:250,renderCell:e=>(0,C.jsx)(i.A,{sx:{padding:"1px 6px",borderRadius:"5px",backgroundColor:"#e33838",color:"#ffff",borderColor:"ffff"},variant:"outlined",onClick:()=>$(e.row),children:"Delete"})}],t=(0,x.dh)(),[a,f]=(0,r.useState)(),[m,y]=(0,r.useState)(!1),[w,v]=(0,r.useState)(new Date),[A,j]=(0,r.useState)(!1),b=async()=>{const e=await async function(e){try{let t=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();const a=await fetch(`${S}users/getLoginUsers?date=${t}`,{headers:await(0,D.q)()});return(await a.json()).usersData}catch(t){throw console.log("Error fetching data:",t),new Error("Failed to fetch data")}}(w);e?f(e):t.error("Something went wrong")},R=e=>{if("prev"===e){const e=new Date(w.getTime()-864e5);v(e)}else if("next"===e){const e=new Date(w.getTime()+864e5);v(e)}};r.useEffect((()=>{(async()=>{try{y(!0),await b(),y(!1)}catch(e){y(!1),t.error(e.message)}})();const e=`${w.getDate()}-${w.getMonth()}-${w.getFullYear()}`,a=`${(new Date).getDate()}-${(new Date).getMonth()}-${(new Date).getFullYear()}`;j(e==a)}),[w]);const P=async e=>{try{const a=await async function(e,t){try{const a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientCode:e,trade:t})},r=await fetch(`${S}users/tradeToggle`,a);return await r.json()}catch(a){throw console.log("Error trade toggle:",a),new Error("Failed to toggle trade for user")}}(e.clientId,!e.isTradeEnabled);null!==a&&void 0!==a&&a.status?(t.success("Trade toggle done!"),b()):t.error(null===a||void 0===a?void 0:a.message)}catch(a){t.error("Something went wrong: "+(null===a||void 0===a?void 0:a.message))}},$=async e=>{try{const a=await async function(e){try{const t={method:"POST",headers:await(0,D.q)(),body:JSON.stringify({id:e})},a=await fetch(`${S}users/deleteLoginUser`,t);return await a.json()}catch(t){throw console.log("Error trade toggle:",t),new Error("Failed to toggle trade for user")}}(e.id);null!==a&&void 0!==a&&a.status?(t.success("Record deleted!"),b()):t.error(null===a||void 0===a?void 0:a.message)}catch(a){t.error("Something went wrong: "+(null===a||void 0===a?void 0:a.message))}};return(0,C.jsxs)(r.Fragment,{children:[(0,C.jsx)(o.A,{children:(0,C.jsx)(n.A,{title:"Login Users"})}),(0,C.jsxs)(s.A,{container:!0,spacing:4,children:[(0,C.jsxs)(s.A,{item:!0,sm:8,children:[(0,C.jsx)(L.A,{label:"Date",onChange:e=>(e=>{v(e)})(e),inputFormat:"dd/MM/yyyy",disableFuture:!0,shouldDisableDate:e=>0===e.getDay()||6===e.getDay(),value:w,renderInput:e=>(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d.A,{onClick:()=>R("prev"),"aria-label":"previous",style:{height:"fit-content",width:"fit-content",marginTop:"25px",marginRight:"2px",paddingRight:"0px",borderRadius:"10px"},children:m?(0,C.jsx)(l.A,{style:{height:"15px",width:"15px"}}):(0,C.jsx)(N.A,{style:{height:"15px",width:"15px"}})}),(0,C.jsx)(c.A,{...e,id:"date",margin:"normal",name:"start"}),(0,C.jsx)(d.A,{disabled:A,onClick:()=>R("next"),"aria-label":"next",style:{height:"fit-content",width:"fit-content",marginTop:"25px",marginLeft:"0px",paddingLeft:"4px",borderRadius:"10px"},children:m?(0,C.jsx)(l.A,{style:{height:"15px",width:"15px"}}):(0,C.jsx)(F.A,{style:{height:"15px",width:"15px"}})})]})}),(0,C.jsx)(M.A,{sx:{marginLeft:"10px",marginTop:"15px",width:"fit-content"},loading:m,onClick:b,children:(0,C.jsx)(k.A,{})}),(0,C.jsx)(M.A,{sx:{marginLeft:"10px",marginTop:"15px",width:"fit-content"},variant:"outlined",loading:m,onClick:async()=>{try{y(!0);const e=await async function(){try{const e=await fetch(`${S}users/autoLoginAngel`,{method:"POST"});return await e.json()}catch(e){throw console.log("Error fetching data:",e),new Error("Failed to fetch data")}}();null!==e&&void 0!==e&&e.status&&(t.success("Auto Login Users Completed!"),b())}catch(e){t.error("Something went wrong:")}finally{y(!1)}},children:"Auto Login Users"})]}),(0,C.jsx)(s.A,{item:!0,sm:12,sx:{display:"content"},children:(0,C.jsx)(s.A,{item:!0,sm:12,sx:{paddingLeft:"20px !important"},children:(0,C.jsxs)(g.A,{variant:"outlined",sx:{padding:"20px"},children:[(0,C.jsx)(p.A,{title:"Login Users List",sx:{padding:"5px 24px 0 24px"}}),(0,C.jsx)(h.A,{sx:{padding:"10px !important"},children:m?(0,C.jsx)(u.A,{animation:"wave"}):(0,C.jsx)(T,{columns:e,loginUsersData:a})})]})})})]})]})}},48625:(e,t,a)=>{var r=a(24994);t.A=void 0;var o=r(a(40039)),n=a(70579),i=(0,o.default)((0,n.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");t.A=i},71948:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(99735),o=a(70579);const n=(0,r.A)((0,o.jsx)("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos")},73876:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(99735),o=a(70579);const n=(0,r.A)((0,o.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos")},97851:(e,t,a)=>{a.d(t,{A:()=>w});var r=a(98587),o=a(58168),n=a(65043),i=a(43024),s=a(31970),d=a(56172),l=a(46141),c=a(69354),g=a(96036);function p(e){return(0,g.A)("MuiCardHeader",e)}const h=(0,a(31748).A)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var u=a(70579);const x=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,o.A)({[`& .${h.title}`]:t.title,[`& .${h.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),f=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),m=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),y=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),w=n.forwardRef((function(e,t){const a=(0,l.A)({props:e,name:"MuiCardHeader"}),{action:n,avatar:c,className:g,component:h="div",disableTypography:w=!1,subheader:v,subheaderTypographyProps:A,title:j,titleTypographyProps:b}=a,C=(0,r.A)(a,["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"]),T=(0,o.A)({},a,{component:h,disableTypography:w}),R=(e=>{const{classes:t}=e;return(0,s.A)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},p,t)})(T);let D=j;null==D||D.type===d.A||w||(D=(0,u.jsx)(d.A,(0,o.A)({variant:c?"body2":"h5",className:R.title,component:"span",display:"block"},b,{children:D})));let S=v;return null==S||S.type===d.A||w||(S=(0,u.jsx)(d.A,(0,o.A)({variant:c?"body2":"body1",className:R.subheader,color:"text.secondary",component:"span",display:"block"},A,{children:S}))),(0,u.jsxs)(x,(0,o.A)({className:(0,i.A)(R.root,g),as:h,ref:t,styleProps:T},C,{children:[c&&(0,u.jsx)(f,{className:R.avatar,styleProps:T,children:c}),(0,u.jsxs)(y,{className:R.content,styleProps:T,children:[D,S]}),n&&(0,u.jsx)(m,{className:R.action,styleProps:T,children:n})]}))}))}}]);
//# sourceMappingURL=569.d3be706c.chunk.js.map