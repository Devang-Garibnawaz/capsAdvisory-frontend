"use strict";(self.webpackChunktred_code_portal=self.webpackChunktred_code_portal||[]).push([[894],{9894:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var a=n(71948),i=n(73876),r=n(90637),s=n(11504),o=n(48625),l=n(53404),d=n(68903),c=n(15795),h=n(40818),p=n(17392),x=n(81637),g=n(12110),u=n(79958),m=n(40632),f=n(26494),y=n(65043),v=n(76472),w=n(81683),j=n(73693);const A=(0,n(51425).$)();var b=n(34562),C=n(70579);const S=()=>{const e=(0,b.dh)(),[t,n]=(0,y.useState)([]),[S,T]=(0,y.useState)(""),[E,D]=(0,y.useState)([]),[N,F]=(0,y.useState)([]),[L,O]=(0,y.useState)(""),[Y,k]=(0,y.useState)("75"),[$,I]=(0,y.useState)(""),[R,P]=(0,y.useState)(!1),[z,M]=(0,y.useState)(new Date),[U,W]=(0,y.useState)(!1),[B,q]=(0,y.useState)(!1),[J,_]=(0,y.useState)(),Q=[{field:"clientId",headerName:"Client Code",width:130,align:"left"},{field:"symbol",headerName:"Symbol",width:250,align:"left"},{field:"orderType",headerName:"Order Type",width:130,headerAlign:"center",align:"center"},{field:"quantity",headerName:"Quantity",headerAlign:"center",type:"number",align:"center",width:130,valueGetter:e=>e.row.quantity>0?e.row.quantity:"-"},{field:"date",headerName:"Entry Time",headerAlign:"center",width:110,align:"left",valueGetter:e=>{const t=new Date(e.row.date);let n=t.getHours(),a=t.getMinutes();var i=n>=12?"pm":"am";return n%=12,n=n||12,a=a<10?0+a:a,n+":"+(a<10?"0":"")+a+" "+i}},{field:"action",headerName:"Action",width:150,renderCell:e=>e.row.activeOrder?(0,C.jsx)(l.A,{sx:{padding:"1px 6px",borderRadius:"5px"},variant:"outlined",onClick:()=>G(e.row),children:"Cancel Order"}):"Canceld Order"}],G=async t=>{try{const n=t.orderData;n.clientId=t.clientId;const a=await async function(e){try{const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},n=await fetch(`${A}orders/cancelOrders`,t);return await n.json()}catch(t){throw console.log("Error fetching data:",t),new Error("Failed to fetch data")}}(n);null!==a&&void 0!==a&&a.status?(e.success("Order Canceled"),V()):e.error(null===a||void 0===a?void 0:a.message),console.log(a)}catch(n){e.error("Something went wrong: "+(null===n||void 0===n?void 0:n.message))}},H=e=>{const t=parseInt(e.substr(0,2),10),n=e.substr(2,3),a=parseInt(e.substr(5,4),10);return new Date(a,{JAN:0,FEB:1,MAR:2,APR:3,MAY:4,JUN:5,JUL:6,AUG:7,SEP:8,OCT:9,NOV:10,DEC:11}[n],t)},V=async()=>{const e=await async function(e){try{const t="?date=";let n=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();const a=await fetch(`${A}orders/getClientOrders${t}${n}`);return(await a.json()).orderData}catch(t){throw console.log("Error fetching data:",t),new Error("Failed to fetch data")}}(z);_(e)};(0,y.useEffect)((()=>{V();const e=`${z.getDate()}-${z.getMonth()}-${z.getFullYear()}`,t=`${(new Date).getDate()}-${(new Date).getMonth()}-${(new Date).getFullYear()}`;q(e==t)}),[z]),(0,y.useEffect)((()=>{K()}),[]);const K=async()=>{const e=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NIFTY";try{var t,n;const a=await fetch(`${A}orders/getNiftyExpiryList?symbol=${e}`),i=await a.json();return[...null===(t=i.data)||void 0===t?void 0:t.expiryDates.monthEnd,...null===(n=i.data)||void 0===n?void 0:n.expiryDates.week]}catch(a){throw console.log("Error fetching data:",a),new Error("Failed to fetch data")}}();if(e){const t=[...e].sort(((e,t)=>H(e).getTime()-H(t).getTime()));n(t)}},X=e=>{if("prev"===e){const e=new Date(z.getTime()-864e5);M(e)}else if("next"===e){const e=new Date(z.getTime()+864e5);M(e)}},Z=async()=>{};return(0,C.jsxs)(y.Fragment,{children:[(0,C.jsx)(v.A,{children:(0,C.jsx)(w.A,{title:"NIFTY Trading"})}),(0,C.jsxs)(d.Ay,{container:!0,spacing:4,children:[(0,C.jsxs)(d.Ay,{item:!0,sm:12,sx:{display:"content"},children:[(0,C.jsxs)(c.A,{sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content",width:"150px"},margin:"normal",fullWidth:!0,select:!0,label:"Select Expiry",name:"expiry",value:S,onChange:async e=>{const t=e.target.value;if(e.target.value){const e=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NIFTY";try{var n;const a=await fetch(`${A}orders/getNFOOptionChainData?symbol=${t}&expiryDate=${e}`);return null===(n=(await a.json()).data)||void 0===n?void 0:n.optionsData}catch(a){throw console.log("Error fetching data:",a),new Error("Failed to fetch data")}}(t),n=e.sort(((e,t)=>e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0));O(""),I(""),D(n)}T(e.target.value)},children:[(0,C.jsx)(h.A,{value:"",children:"None"}),t.map((e=>(0,C.jsx)(h.A,{value:e,children:e},e)))]}),S&&(0,C.jsxs)(c.A,{sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content",width:"150px"},margin:"normal",fullWidth:!0,label:"NIFTY Future",name:"BUY/SELL",select:!0,title:"NIFTY Fut BUY/SELL",value:$,onChange:e=>(e=>{I(e),O("");let t=[];"BUY"===e&&(t=E.filter((e=>!e.symbol.endsWith("CE")))),"SELL"===e&&(t=E.filter((e=>!e.symbol.endsWith("PE")))),F(t)})(e.target.value),children:[(0,C.jsx)(h.A,{selected:!0,value:"",children:"Select"}),(0,C.jsx)(h.A,{value:"BUY",children:"NIFTY BUY"}),(0,C.jsx)(h.A,{value:"SELL",children:"NIFTY SELL"})]}),S&&$&&(0,C.jsxs)(c.A,{sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content",width:"250px"},margin:"normal",fullWidth:!0,select:!0,label:"Select Strike Price",name:"interval",value:L,onChange:e=>O(e.target.value),children:[(0,C.jsx)(h.A,{value:"",children:"None"}),N.map((e=>(0,C.jsx)(h.A,{value:e.token+"*"+e.symbol,children:e.symbol},e.token)))]}),(0,C.jsxs)(c.A,{sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content",width:"100px"},margin:"normal",fullWidth:!0,label:"Enter Quantity",name:"quantity",select:!0,title:"1 Lot size 75 QTY",value:Y,onChange:e=>k(e.target.value),children:[(0,C.jsx)(h.A,{value:"75",children:"1"}),(0,C.jsx)(h.A,{value:"150",children:"2"}),(0,C.jsx)(h.A,{value:"225",children:"3"}),(0,C.jsx)(h.A,{value:"300",children:"4"}),(0,C.jsx)(h.A,{value:"375",children:"5"})]}),(0,C.jsx)(r.A,{loading:R,sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content"},variant:"outlined",onClick:async()=>{if(P(!0),!S)return e.error("Please select expiry date!"),void P(!1);if(!L)return e.error("Please select strike price!"),void P(!1);if(!$)return e.error("Please select nifty option BUY or SELL!"),void P(!1);const t=L.split("*")[0],n=L.split("*")[1];try{const a=await async function(e,t,n,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NIFTY";try{const r={symbolToken:e,quantity:t,expiryDate:n,niftyOption:a,symbol:i},s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},o=await fetch(`${A}orders/placeNFOOrder`,s);return await o.json()}catch(r){throw console.log("Error fetching data:",r),new Error("Failed to fetch data")}}(t,Number(Y),S,$,n);a.status?(e.success(a.message),setTimeout((()=>{V()}),100)):e.error(a.message)}catch(a){e.error(JSON.stringify(a))}finally{P(!1)}},children:"Place Order"}),(0,C.jsx)(l.A,{sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content"},variant:"outlined",onClick:()=>{},children:"Cancel"})]}),(0,C.jsxs)(d.Ay,{item:!0,sm:8,sx:{display:"content"},children:[(0,C.jsx)(s.A,{label:"Date",onChange:e=>(e=>{M(e)})(e),inputFormat:"dd/MM/yyyy",disableFuture:!0,shouldDisableDate:e=>0===e.getDay()||6===e.getDay(),value:z,renderInput:e=>(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(p.A,{onClick:()=>X("prev"),"aria-label":"previous",style:{height:"fit-content",width:"fit-content",marginTop:"25px",marginRight:"2px",paddingRight:"0px",borderRadius:"10px"},children:U?(0,C.jsx)(x.A,{style:{height:"15px",width:"15px"}}):(0,C.jsx)(a.A,{style:{height:"15px",width:"15px"}})}),(0,C.jsx)(c.A,{...e,id:"date",margin:"normal",name:"start"}),(0,C.jsx)(p.A,{disabled:B,onClick:()=>X("next"),"aria-label":"next",style:{height:"fit-content",width:"fit-content",marginTop:"25px",marginLeft:"0px",paddingLeft:"4px",borderRadius:"10px"},children:U?(0,C.jsx)(x.A,{style:{height:"15px",width:"15px"}}):(0,C.jsx)(i.A,{style:{height:"15px",width:"15px"}})})]})}),(0,C.jsx)(r.A,{sx:{marginLeft:"10px",marginTop:"15px",width:"fit-content"},loading:U,onClick:V,children:(0,C.jsx)(o.A,{})})]}),(0,C.jsx)(d.Ay,{container:!0,spacing:2,children:(0,C.jsx)(d.Ay,{item:!0,sm:12,sx:{paddingLeft:"20px !important"},children:(0,C.jsxs)(g.A,{variant:"outlined",sx:{padding:"20px"},children:[(0,C.jsx)(u.A,{title:(0,C.jsxs)(m.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,C.jsx)("span",{children:"Client Orders:"}),(0,C.jsx)(l.A,{sx:{padding:"3px 6px",borderRadius:"5px"},variant:"outlined",disabled:!(J&&J.length>0),onAbort:()=>Z,children:"Exit Position All"})]}),sx:{padding:"5px 24px 0 24px"}}),(0,C.jsx)(f.A,{children:(0,C.jsx)(j.A,{ordersData:J,columns:Q})})]})})})]})]})}},73693:(e,t,n)=>{n.d(t,{A:()=>x});var a=n(65043),i=n(54833),r=n(96094),s=n(39155),o=n(86064),l=n(13117),d=n(27273),c=n(48251),h=n(40632),p=n(70579);const x=e=>{let{ordersData:t=[],columns:n=[]}=e;const[x,g]=a.useState(20),u=(0,a.useMemo)((()=>n),[n]),m=(0,a.useMemo)((()=>t),[t]);if(0===t.length)return(0,p.jsx)(i.A,{title:"No Data Found"});return(0,p.jsx)(h.A,{sx:{height:"580px",width:"100%","& .super-app-theme--cell":{backgroundColor:"rgba(224, 183, 60, 0.55)",color:"#1a3e72",fontWeight:"600"},"& .super-app.negative":{color:"#f35631",fontWeight:"600"},"& .super-app.positive":{color:"#10b983",fontWeight:"600"}},children:(0,p.jsx)(c.z,{rows:m,disableColumnSelector:!0,columns:u,isRowSelectable:e=>e._id,components:{Toolbar:function(){return(0,p.jsxs)(r.b,{sx:{padding:"1px"},children:[(0,p.jsx)(s.j,{sx:{padding:"14px"},onResize:void 0,nonce:void 0,onResizeCapture:void 0}),(0,p.jsx)(o.Q,{sx:{padding:"14px"},onResize:void 0,nonce:void 0,onResizeCapture:void 0}),(0,p.jsx)(l.z,{sx:{padding:"14px"},onResize:void 0,nonce:void 0,onResizeCapture:void 0}),(0,p.jsx)(d.qn,{sx:{padding:"14px"}})]})}},density:"compact",pageSize:x,onPageSizeChange:e=>g(e),getRowId:e=>e._id,rowsPerPageOptions:[5,10,20,100]})})}}}]);
//# sourceMappingURL=894.26202b33.chunk.js.map