"use strict";(self.webpackChunktred_code_portal=self.webpackChunktred_code_portal||[]).push([[645],{7645:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var a=n(65043),r=n(76472),i=n(81683),l=n(54),s=n(43613),o=n(75930),c=n(16543),d=n(97851),h=n(47375),x=n(21114),g=n(34562);const u=e=>{const t=new Date(e),n=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0");return`${t.getFullYear()}-${a}-${n}`},p=function(e){const t=new Date(e);return`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`};var m=n(66360),j=n(1815),A=n(90637),f=n(79650),v=n(63336),S=n(74600),y=n(85865),w=n(71806),T=n(84882),b=n(28076),D=n(10039),$=n(73460),F=n(70579);const E=e=>{var t,n;return(0,F.jsxs)(f.A,{component:v.A,children:[(0,F.jsxs)(S.A,{direction:"row",spacing:2,children:[(0,F.jsxs)(y.A,{children:[(0,F.jsx)("b",{children:"Counted FRVP: "})," ",e.data.countedFRVP]}),(0,F.jsxs)(y.A,{children:[(0,F.jsx)("b",{children:"Symbol Token: "})," ",e.data.symboltoken]})]}),(0,F.jsxs)(S.A,{direction:"row",spacing:2,children:[(0,F.jsxs)(y.A,{children:[(0,F.jsx)("b",{children:"From Date: "})," ",e.data.fromDateTime]}),(0,F.jsxs)(y.A,{children:[(0,F.jsx)("b",{children:"To Date: "})," ",e.data.toDateTime]})]}),(0,F.jsxs)(w.A,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,F.jsx)(T.A,{children:(0,F.jsxs)(b.A,{children:[(0,F.jsx)(D.A,{children:"Candle Time"}),null===(t=e.data)||void 0===t||null===(n=t.candelData)||void 0===n?void 0:n.map(((e,t)=>(0,F.jsx)(D.A,{align:"center",children:p(e.bankNiftyTime)},t)))]})}),(0,F.jsx)($.A,{children:["volume","open","high","low","close"].map((t=>{var n,a;return(0,F.jsxs)(b.A,{children:[(0,F.jsx)(D.A,{style:{fontWeight:"bold"},children:t}),null===(n=e.data)||void 0===n||null===(a=n.candelData)||void 0===a?void 0:a.map(((e,n)=>(0,F.jsx)(D.A,{align:"center",children:e[t.toLowerCase()]},n)))]},t)}))})]})]})};var N=n(63003),k=n(11504),C=n(41659);const I=()=>{const e=(0,g.dh)(),[t,n]=(0,a.useState)([]),[f,v]=(0,a.useState)(""),[S,y]=(0,a.useState)([]),[w,T]=(0,a.useState)(""),[b,D]=(0,a.useState)([]),[$,I]=(0,a.useState)(""),[L,U]=(0,a.useState)([]),[M,O]=(0,a.useState)(!1),[R,J]=(0,a.useState)(new Date),[W,K]=(0,a.useState)(new Date(0,0,0,9,15)),[P,_]=(0,a.useState)(new Date(0,0,0,9,25)),[V,Y]=(0,a.useState)("");(0,a.useEffect)((()=>{(async()=>{try{const e=JSON.parse(localStorage.getItem("symbolTokenList"))||await(0,x.cl)();n(e),localStorage.setItem("symbolTokenList",JSON.stringify(e)),console.log(e.find((e=>e.tradingsymbol.includes("FUT")))),D(e.filter((e=>e.tradingsymbol.endsWith("FUT"))))}catch(t){e.error(t.message)}})()}),[]),(0,a.useEffect)((()=>{try{"FUT"===f?(D([]),D(t.filter((e=>e.tradingsymbol.endsWith("FUT"))))):"STRIKE"===f&&(async()=>{const e=await(0,x.S5)();e.sort(((e,t)=>new Date(e.split("-").reverse().join("-")).getTime()-new Date(t.split("-").reverse().join("-")).getTime())),y(e)})()}catch(n){e.error(n.message)}}),[f]);return(0,F.jsxs)(a.Fragment,{children:[(0,F.jsx)(r.A,{children:(0,F.jsx)(i.A,{title:"Bank Nifty"})}),(0,F.jsxs)(l.A,{container:!0,spacing:2,children:[(0,F.jsxs)(l.A,{item:!0,sm:8,sx:{display:"content"},children:[(0,F.jsxs)(s.A,{sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content",width:"150px"},margin:"normal",fullWidth:!0,select:!0,label:"Select Market",name:"bankNiftyF&O",value:f,onChange:e=>v(e.target.value),children:[(0,F.jsx)(o.A,{value:"",children:"None"}),(0,F.jsx)(o.A,{value:"FUT",children:"Futures"},"FUT"),(0,F.jsx)(o.A,{value:"STRIKE",children:"Strikes"},"STRIKE")]}),"STRIKE"===f&&(0,F.jsxs)(s.A,{sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content",width:"150px"},margin:"normal",fullWidth:!0,select:!0,label:"Select Expiry",name:"expiry",value:w,onChange:e=>{const n=(e=>{const[t,n,a]=e.split("-"),r=a.slice(2);return`${t}${{Jan:"JAN",Feb:"FEB",Mar:"MAR",Apr:"APR",May:"MAY",Jun:"JUN",Jul:"JUL",Aug:"AUG",Sep:"SEP",Oct:"OCT",Nov:"NOV",Dec:"DEC"}[n]}${r}`})(e.target.value),a=t.filter((e=>e.tradingsymbol.includes(`BANKNIFTY${n}`)));T(e.target.value),console.log(a),D(a)},children:[(0,F.jsx)(o.A,{value:"",children:"None"}),S.map((e=>(0,F.jsx)(o.A,{value:e,children:e},e)))]}),(0,F.jsxs)(s.A,{sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content",width:"150px"},margin:"normal",fullWidth:!0,select:!0,label:"Select interval",name:"interval",value:V,onChange:e=>Y(e.target.value),children:[(0,F.jsx)(o.A,{value:"",children:"None"}),(0,F.jsx)(o.A,{value:"ONE_MINUTE",children:"1 Minute"}),(0,F.jsx)(o.A,{value:"FIVE_MINUTE",children:"5 Minute"})]}),(0,F.jsxs)(s.A,{sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content",width:"150px"},margin:"normal",fullWidth:!0,select:!0,label:"Select Option",name:"bankNiftyTokens",value:$,onChange:e=>I(e.target.value),children:[(0,F.jsx)(o.A,{value:"",children:"None"}),null===b||void 0===b?void 0:b.map((e=>(0,F.jsx)(o.A,{value:e.symboltoken,children:e.tradingsymbol},e.symboltoken)))]})]}),(0,F.jsxs)(l.A,{item:!0,sm:8,sx:{display:"content"},children:[(0,F.jsxs)(N.A,{dateAdapter:C.A,children:[(0,F.jsx)(k.A,{label:"Select Date",value:R,onChange:e=>{J(e)},renderInput:e=>(0,F.jsx)(s.A,{sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content",width:"150px"},...e})}),(0,F.jsx)(j.A,{label:"From",value:W,onChange:e=>{K(e)},renderInput:e=>(0,F.jsx)(s.A,{sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content",width:"150px"},...e})}),(0,F.jsx)(j.A,{label:"To",value:P,onChange:e=>{_(e)},renderInput:e=>(0,F.jsx)(s.A,{sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content",width:"150px"},...e})})]}),(0,F.jsx)(A.A,{loading:M,sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content"},variant:"outlined",onClick:async()=>{try{O(!0);const e=`${u(R.toDateString())} ${p(W.toString())}`,t=`${u(R.toDateString())} ${p(P.toString())}`,n=await(0,x.GE)(e,t,V,$);U(n)}catch(t){e.error(t.message)}finally{O(!1)}},children:(0,F.jsx)(m.A,{})})]})]}),(0,F.jsx)(l.A,{container:!0,spacing:2,children:(0,F.jsx)(l.A,{item:!0,sm:12,sx:{paddingLeft:"20px !important"},children:(0,F.jsxs)(c.A,{variant:"outlined",sx:{padding:"20px"},children:[(0,F.jsx)(d.A,{title:"Fixed Range Volume Profile:",sx:{padding:"5px 24px 0 24px"}}),(0,F.jsx)(h.A,{children:L&&(0,F.jsx)(E,{data:L})})]})})})]})}},21114:(e,t,n)=>{n.d(t,{Fc:()=>d,GE:()=>c,S5:()=>o,cl:()=>s});const a=(0,n(51425).$)(),r="orders/getSymbolToken",i="orders/getOptionChainData",l="orders/getPrevData";async function s(){try{const e=await fetch(`${a}${r}`);return(await e.json()).data}catch(e){throw console.log("Error fetching data:",e),new Error("Failed to fetch data")}}async function o(){try{var e,t,n,r;const l=await fetch(`${a}${i}?symbol=BANKNIFTY&index=NFO`),s=await l.json();return[...null===(e=s.data)||void 0===e||null===(t=e.expiryDates)||void 0===t?void 0:t.monthEnd,...null===(n=s.data)||void 0===n||null===(r=n.expiryDates)||void 0===r?void 0:r.week]}catch(l){throw console.log("Error fetching data:",l),new Error("Failed to fetch data")}}async function c(e,t,n,r){const i=`?fromDate=${e}&toDate=${t}&interval=${n}&symbolToken=${r}`;try{const e=await fetch(`${a}${l}${i}`);return(await e.json()).data}catch(s){throw console.log("Error fetching data:",s),new Error("Failed to fetch data")}}const d=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{let n=[];const r="?date=";let i=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();const l=await fetch(`${a}orders${r}${i}`),s=await l.json();return""!=t?s.orderData.filter((e=>{var a;null!==(a=e.symbol)&&void 0!==a&&a.toUpperCase().includes(t.toUpperCase())&&n.push(e)})):n=s.orderData,n}catch(n){throw console.log("Error fetching data:",n),new Error("Failed to fetch data")}}}}]);
//# sourceMappingURL=645.c1a6c530.chunk.js.map