"use strict";(self.webpackChunktred_code_portal=self.webpackChunktred_code_portal||[]).push([[38],{3038:(e,a,r)=>{r.r(a),r.d(a,{default:()=>P});var o=r(18599),t=r(16543),i=r(49801),n=r(47375),l=r(97851),s=r(64312),d=r(34552),m=r(80739),c=r(63274),u=r(69175),p=r(43613),f=r(90637),h=r(63516),v=r(95957),g=r(73033),A=r(35975),b=r(82907);const y=async e=>{const{data:a}=await A.A.put("/api/profile-info",e);return a};function x(){const e=(0,b.useQueryClient)(),{isLoading:a,mutateAsync:r}=(0,b.useMutation)(y,{onSuccess:a=>{e.setQueryData(["profile-info"],a)}});return{isUpdating:a,updateProfileInfo:r}}var N=r(34562);function C(){return(0,b.useQuery)("profile-info",(()=>(async()=>{const{data:e}=await A.A.get("/api/profile-info");return e})()))}var j=r(70579);const M=[{label:"profile.info.form.gender.options.f",value:"F"},{label:"profile.info.form.gender.options.m",value:"M"},{label:"profile.info.form.gender.options.n",value:"NC"}],P=()=>{const e=(0,N.dh)(),{t:a}=(0,v.B)(),{data:r}=C(),{isUpdating:A,updateProfileInfo:b}=x(),y=(0,h.Wx)({initialValues:{email:r?r.email:"",firstName:r?r.firstName:"",gender:r?r.gender:void 0,job:r?r.job:"",lastName:r?r.lastName:""},validationSchema:g.Ik({email:g.Yj().email(a("common.validations.email")).required(a("common.validations.required")),firstName:g.Yj().max(20,a("common.validations.max",{size:20})).required(a("common.validations.required")),lastName:g.Yj().max(30,a("common.validations.max",{size:30})).required(a("common.validations.required"))}),onSubmit:e=>P(e)}),P=async o=>{b({...o,id:null===r||void 0===r?void 0:r.id}).then((()=>{e.success(a("profile.notifications.informationUpdated"))})).catch((()=>{e.error(a("common.errors.unexpected.subTitle"))}))};return(0,j.jsx)("form",{onSubmit:y.handleSubmit,noValidate:!0,children:(0,j.jsxs)(t.A,{children:[(0,j.jsx)(l.A,{title:a("profile.info.title")}),(0,j.jsxs)(n.A,{children:[(0,j.jsx)(p.A,{margin:"normal",required:!0,fullWidth:!0,id:"lastName",label:a("profile.info.form.lastName.label"),name:"lastName",autoComplete:"family-name",autoFocus:!0,disabled:A,value:y.values.lastName,onChange:y.handleChange,error:y.touched.lastName&&Boolean(y.errors.lastName),helperText:y.touched.lastName&&y.errors.lastName}),(0,j.jsx)(p.A,{margin:"normal",required:!0,fullWidth:!0,id:"firstName",label:a("profile.info.form.firstName.label"),name:"firstName",autoComplete:"given-name",disabled:A,value:y.values.firstName,onChange:y.handleChange,error:y.touched.firstName&&Boolean(y.errors.firstName),helperText:y.touched.firstName&&y.errors.firstName}),(0,j.jsxs)(s.A,{component:"fieldset",margin:"normal",children:[(0,j.jsx)(m.A,{component:"legend",children:a("profile.info.form.gender.label")}),(0,j.jsx)(u.A,{row:!0,"aria-label":"gender",name:"gender",value:y.values.gender,onChange:y.handleChange,children:M.map((e=>(0,j.jsx)(d.A,{value:e.value,control:(0,j.jsx)(c.A,{}),label:a(e.label)},e.value)))})]}),(0,j.jsx)(p.A,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:a("profile.info.form.email.label"),name:"email",autoComplete:"email",disabled:A,value:y.values.email,onChange:y.handleChange,error:y.touched.email&&Boolean(y.errors.email),helperText:y.touched.email&&y.errors.email})]}),(0,j.jsxs)(i.A,{children:[(0,j.jsx)(o.A,{onClick:()=>y.resetForm(),children:a("common.reset")}),(0,j.jsx)(f.A,{loading:A,type:"submit",variant:"contained",children:a("common.update")})]})]})})}},49801:(e,a,r)=>{r.d(a,{A:()=>f});var o=r(98587),t=r(58168),i=r(65043),n=r(43024),l=r(31970),s=r(69354),d=r(46141),m=r(96036);function c(e){return(0,m.A)("MuiCardActions",e)}(0,r(31748).A)("MuiCardActions",["root","spacing"]);var u=r(70579);const p=(0,s.Ay)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,a)=>{const{styleProps:r}=e;return(0,t.A)({},a.root,!r.disableSpacing&&a.spacing)}})((e=>{let{styleProps:a}=e;return(0,t.A)({display:"flex",alignItems:"center",padding:8},!a.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})})),f=i.forwardRef((function(e,a){const r=(0,d.A)({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:s}=r,m=(0,o.A)(r,["disableSpacing","className"]),f=(0,t.A)({},r,{disableSpacing:i}),h=(e=>{const{classes:a,disableSpacing:r}=e,o={root:["root",!r&&"spacing"]};return(0,l.A)(o,c,a)})(f);return(0,u.jsx)(p,(0,t.A)({className:(0,n.A)(h.root,s),styleProps:f,ref:a},m))}))},97851:(e,a,r)=>{r.d(a,{A:()=>b});var o=r(98587),t=r(58168),i=r(65043),n=r(43024),l=r(31970),s=r(56172),d=r(46141),m=r(69354),c=r(96036);function u(e){return(0,c.A)("MuiCardHeader",e)}const p=(0,r(31748).A)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var f=r(70579);const h=(0,m.Ay)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,a)=>(0,t.A)({[`& .${p.title}`]:a.title,[`& .${p.subheader}`]:a.subheader},a.root)})({display:"flex",alignItems:"center",padding:16}),v=(0,m.Ay)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,a)=>a.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),g=(0,m.Ay)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,a)=>a.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),A=(0,m.Ay)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,a)=>a.content})({flex:"1 1 auto"}),b=i.forwardRef((function(e,a){const r=(0,d.A)({props:e,name:"MuiCardHeader"}),{action:i,avatar:m,className:c,component:p="div",disableTypography:b=!1,subheader:y,subheaderTypographyProps:x,title:N,titleTypographyProps:C}=r,j=(0,o.A)(r,["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"]),M=(0,t.A)({},r,{component:p,disableTypography:b}),P=(e=>{const{classes:a}=e;return(0,l.A)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},u,a)})(M);let S=N;null==S||S.type===s.A||b||(S=(0,f.jsx)(s.A,(0,t.A)({variant:m?"body2":"h5",className:P.title,component:"span",display:"block"},C,{children:S})));let T=y;return null==T||T.type===s.A||b||(T=(0,f.jsx)(s.A,(0,t.A)({variant:m?"body2":"body1",className:P.subheader,color:"text.secondary",component:"span",display:"block"},x,{children:T}))),(0,f.jsxs)(h,(0,t.A)({className:(0,n.A)(P.root,c),as:p,ref:a,styleProps:M},j,{children:[m&&(0,f.jsx)(v,{className:P.avatar,styleProps:M,children:m}),(0,f.jsxs)(A,{className:P.content,styleProps:M,children:[S,T]}),i&&(0,f.jsx)(g,{className:P.action,styleProps:M,children:i})]}))}))}}]);
//# sourceMappingURL=38.f90b53c9.chunk.js.map