"use strict";(self.webpackChunktred_code_portal=self.webpackChunktred_code_portal||[]).push([[637],{5637:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var r=a(18599),n=a(54),i=a(43613),s=a(75930),o=a(48073),l=a(98112),d=a(16543),c=a(97851),p=a(18863),h=a(47375),u=a(71948),g=a(73876),x=a(90637),m=a(11504),y=a(48625),f=a(65043),v=a(76472),A=a(81683),b=a(34562),w=a(73693);const j=(0,a(51425).$)();var C=a(70579);const N=()=>{const e=(0,b.dh)(),[t,a]=(0,f.useState)([]),[N,T]=(0,f.useState)([]),[S,R]=(0,f.useState)(""),[D,P]=(0,f.useState)("100"),[E,L]=(0,f.useState)("0"),[M,k]=(0,f.useState)("0"),[O,$]=(0,f.useState)("0"),[F,I]=(0,f.useState)(!1),[z,B]=(0,f.useState)(""),[W,H]=(0,f.useState)(),[q,U]=(0,f.useState)(new Date),[_,J]=(0,f.useState)(!1),[Y,G]=(0,f.useState)(!1),Q=[{field:"symbol",headerName:"Symbol",width:250,align:"center"},{field:"clientId",headerName:"Client Code",width:130,align:"center"},{field:"orderType",headerName:"Order Type",width:130,headerAlign:"center",align:"center"},{field:"entryPrice",headerName:"Entry Price",headerAlign:"center",type:"number",align:"center",width:130},{field:"stopLoss",headerName:"Stop Loss",headerAlign:"center",type:"number",align:"center",width:130},{field:"target",headerName:"Target",headerAlign:"center",type:"number",align:"center",width:130},{field:"quantity",headerName:"Quantity",headerAlign:"center",type:"number",align:"center",width:130,valueGetter:e=>e.row.quantity>0?e.row.quantity:"-"},{field:"date",headerName:"Entry Time",headerAlign:"center",width:110,align:"left",valueGetter:e=>{const t=new Date(e.row.date);let a=t.getHours(),r=t.getMinutes();var n=a>=12?"pm":"am";return a%=12,a=a||12,r=r<10?0+r:r,a+":"+(r<10?"0":"")+r+" "+n}},{field:"action",headerName:"Action",width:150,renderCell:e=>e.row.activeOrder?(0,C.jsx)(r.A,{sx:{padding:"1px 6px",borderRadius:"5px"},variant:"outlined",onClick:()=>ee(e.row),children:"Cancel Order"}):"Canceld Order"}];f.useEffect((()=>{(async()=>{try{G(!0),await X(),G(!1)}catch(t){G(!1),e.error(t.message)}})();const t=`${q.getDate()}-${q.getMonth()}-${q.getFullYear()}`,a=`${(new Date).getDate()}-${(new Date).getMonth()}-${(new Date).getFullYear()}`;J(t==a)}),[q]);const V=async()=>{const e=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CRUDEOIL";try{var t;const a=await fetch(`${j}orders/getCrudeOilExpiryList?symbol=${e}`);return null===(t=(await a.json()).data)||void 0===t?void 0:t.expiryDates}catch(a){throw console.log("Error fetching data:",a),new Error("Failed to fetch data")}}();if(e){const t=[...e].sort(((e,t)=>Z(e).getTime()-Z(t).getTime()));a(t)}},K=e=>{if("prev"===e){const e=new Date(q.getTime()-864e5);U(e)}else if("next"===e){const e=new Date(q.getTime()+864e5);U(e)}},X=async()=>{const e=await async function(e){try{const t="?date=";let a=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();const r=await fetch(`${j}orders/getClientOrders${t}${a}`);return(await r.json()).orderData}catch(t){throw console.log("Error fetching data:",t),new Error("Failed to fetch data")}}(q);H(e)},Z=e=>{const t=parseInt(e.substr(0,2),10),a=e.substr(2,3),r=parseInt(e.substr(5,4),10);return new Date(r,{JAN:0,FEB:1,MAR:2,APR:3,MAY:4,JUN:5,JUL:6,AUG:7,SEP:8,OCT:9,NOV:10,DEC:11}[a],t)};(0,f.useEffect)((()=>{V()}),[]);const ee=async t=>{try{const a=t.orderData;a.clientId=t.clientId;const r=await async function(e){try{const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},a=await fetch(`${j}orders/cancelOrders`,t);return await a.json()}catch(t){throw console.log("Error fetching data:",t),new Error("Failed to fetch data")}}(a);null!==r&&void 0!==r&&r.status?(e.success("Order Canceled"),X()):e.error(null===r||void 0===r?void 0:r.message),console.log(r)}catch(a){e.error("Something went wrong: "+(null===a||void 0===a?void 0:a.message))}};return(0,C.jsxs)(f.Fragment,{children:[(0,C.jsx)(v.A,{children:(0,C.jsx)(A.A,{title:"Crude Oil"})}),(0,C.jsxs)(n.A,{container:!0,spacing:4,children:[(0,C.jsxs)(n.A,{item:!0,sm:8,sx:{display:"content"},children:[(0,C.jsxs)(i.A,{sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content",width:"150px"},margin:"normal",fullWidth:!0,select:!0,label:"Select Expiry",name:"expiry",value:S,onChange:async e=>{const t=e.target.value;if(e.target.value){const e=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CRUDEOIL";try{const a=await fetch(`${j}orders/getStrikePriceList?symbol=${t}&expiryDate=${e}`);return(await a.json()).data}catch(a){throw console.log("Error fetching data:",a),new Error("Failed to fetch data")}}(t),a=e.sort(((e,t)=>e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0));T(a)}R(e.target.value)},children:[(0,C.jsx)(s.A,{value:"",children:"None"}),t.map((e=>(0,C.jsx)(s.A,{value:e,children:e},e)))]}),S&&(0,C.jsxs)(i.A,{sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content",width:"300px"},margin:"normal",fullWidth:!0,select:!0,label:"Select Strike Price",name:"interval",value:z,onChange:e=>B(e.target.value),children:[(0,C.jsx)(s.A,{value:"",children:"None"}),N.map((e=>(0,C.jsx)(s.A,{value:e.token+"*"+e.symbol,children:e.symbol},e.token)))]}),(0,C.jsxs)(i.A,{sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content",width:"150px"},margin:"normal",fullWidth:!0,label:"Enter Quantity",name:"quantity",select:!0,title:"1 Lot size 100 BBL",value:D,onChange:e=>P(e.target.value),children:[(0,C.jsx)(s.A,{value:"100",children:"1"}),(0,C.jsx)(s.A,{value:"200",children:"2"}),(0,C.jsx)(s.A,{value:"300",children:"3"}),(0,C.jsx)(s.A,{value:"400",children:"4"}),(0,C.jsx)(s.A,{value:"500",children:"5"})]})]}),(0,C.jsxs)(n.A,{item:!0,sm:12,sx:{display:"content"},children:[(0,C.jsx)(i.A,{sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content",width:"200px"},margin:"normal",fullWidth:!0,label:"Enter Buying At",name:"buyingAt",value:E,onChange:e=>L(e.target.value),inputProps:{step:1,min:0,type:"number"}}),(0,C.jsx)(i.A,{sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content",width:"200px"},margin:"normal",fullWidth:!0,label:"Enter Target",name:"target",value:O,onChange:e=>$(e.target.value),inputProps:{step:1,min:0,type:"number"}}),(0,C.jsx)(i.A,{sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content",width:"200px"},margin:"normal",fullWidth:!0,label:"Enter Stoploss",name:"stoploss",value:M,onChange:e=>k(e.target.value),inputProps:{step:1,min:0,type:"number"}}),(0,C.jsx)(x.A,{loading:F,sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content"},variant:"outlined",onClick:async()=>{if(I(!0),!S)return e.error("Please select expiry date!"),void I(!1);if(!z)return e.error("Please select strike price!"),void I(!1);if(Number(E)<=0)return e.error("Please enter buying price!"),void I(!1);if(Number(O)<=0)return e.error("Please enter target price!"),void I(!1);if(Number(M)<=0)return e.error("Please enter stoploss price!"),void I(!1);const t=z.split("*")[0],a=z.split("*")[1];console.log("symbolToken",t),console.log("symbol",a);const r=await async function(e,t,a,r,n,i){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"CRUDEOIL";try{const o={symbolToken:e,quantity:t,buying:a,target:r,stopLoss:n,expiryDate:i,symbol:s},l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},d=await fetch(`${j}orders/placeOrder`,l);return await d.json()}catch(o){throw console.log("Error fetching data:",o),new Error("Failed to fetch data")}}(t,Number(D),Number(E),Number(O),Number(M),S,a);r.status?(e.success(r.message),X()):e.error(r.message),I(!1)},children:"Buy"}),(0,C.jsx)(r.A,{sx:{marginLeft:"10px",marginTop:"15px",height:"fit-content"},variant:"outlined",onClick:()=>{},children:"Cancel"})]}),(0,C.jsxs)(n.A,{item:!0,sm:6,sx:{display:"content"},children:[(0,C.jsx)(m.A,{label:"Date",onChange:e=>(e=>{U(e)})(e),inputFormat:"dd/MM/yyyy",disableFuture:!0,shouldDisableDate:e=>0===e.getDay()||6===e.getDay(),value:q,renderInput:e=>(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(o.A,{onClick:()=>K("prev"),"aria-label":"previous",style:{height:"fit-content",width:"fit-content",marginTop:"25px",marginRight:"2px",paddingRight:"0px",borderRadius:"10px"},children:Y?(0,C.jsx)(l.A,{style:{height:"15px",width:"15px"}}):(0,C.jsx)(u.A,{style:{height:"15px",width:"15px"}})}),(0,C.jsx)(i.A,{...e,id:"date",margin:"normal",name:"start"}),(0,C.jsx)(o.A,{disabled:_,onClick:()=>K("next"),"aria-label":"next",style:{height:"fit-content",width:"fit-content",marginTop:"25px",marginLeft:"0px",paddingLeft:"4px",borderRadius:"10px"},children:Y?(0,C.jsx)(l.A,{style:{height:"15px",width:"15px"}}):(0,C.jsx)(g.A,{style:{height:"15px",width:"15px"}})})]})}),(0,C.jsx)(x.A,{sx:{marginLeft:"10px",marginTop:"15px",width:"fit-content"},loading:Y,onClick:X,children:(0,C.jsx)(y.A,{})})]}),(0,C.jsx)(n.A,{container:!0,spacing:2,children:(0,C.jsx)(n.A,{item:!0,sm:12,sx:{paddingLeft:"20px !important"},children:(0,C.jsxs)(d.A,{variant:"outlined",sx:{padding:"20px"},children:[(0,C.jsx)(c.A,{title:(0,C.jsxs)(p.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,C.jsx)("span",{children:"Client Orders:"}),(0,C.jsx)(r.A,{sx:{padding:"3px 6px",borderRadius:"5px"},variant:"outlined",disabled:!0,children:"Cancel All"})]}),sx:{padding:"5px 24px 0 24px"}}),(0,C.jsx)(h.A,{children:(0,C.jsx)(w.A,{ordersData:W,columns:Q})})]})})})]})]})}},40632:(e,t,a)=>{a.d(t,{A:()=>m});var r=a(58168),n=a(98587),i=a(65043);function s(e){var t,a,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(a=s(e[t]))&&(r&&(r+=" "),r+=a)}else for(a in e)e[a]&&(r&&(r+=" "),r+=a);return r}const o=function(){for(var e,t,a=0,r="",n=arguments.length;a<n;a++)(e=arguments[a])&&(t=s(e))&&(r&&(r+=" "),r+=t);return r};var l=a(7518),d=a(58812),c=a(18698),p=a(45527),h=a(70579);const u=["className","component"];var g=a(79386);const x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:a,defaultClassName:s="MuiBox-root",generateClassName:g}=e,x=(0,l.Ay)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(d.A);return i.forwardRef((function(e,i){const l=(0,p.A)(a),d=(0,c.A)(e),{className:m,component:y="div"}=d,f=(0,n.A)(d,u);return(0,h.jsx)(x,(0,r.A)({as:y,ref:i,className:o(m,g?g(s):s),theme:t&&l[t]||l},f))}))}({defaultTheme:(0,a(88279).A)(),defaultClassName:"MuiBox-root",generateClassName:g.A.generate}),m=x},48625:(e,t,a)=>{var r=a(24994);t.A=void 0;var n=r(a(40039)),i=a(70579),s=(0,n.default)((0,i.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");t.A=s},71948:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(99735),n=a(70579);const i=(0,r.A)((0,n.jsx)("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos")},73693:(e,t,a)=>{a.d(t,{A:()=>u});var r=a(65043),n=a(54833),i=a(96094),s=a(39155),o=a(86064),l=a(13117),d=a(27273),c=a(48251),p=a(40632),h=a(70579);const u=e=>{let{ordersData:t=[],columns:a=[]}=e;const[u,g]=r.useState(20),x=(0,r.useMemo)((()=>a),[a]),m=(0,r.useMemo)((()=>t),[t]);if(0===t.length)return(0,h.jsx)(n.A,{title:"No Data Found"});return(0,h.jsx)(p.A,{sx:{height:"580px",width:"100%","& .super-app-theme--cell":{backgroundColor:"rgba(224, 183, 60, 0.55)",color:"#1a3e72",fontWeight:"600"},"& .super-app.negative":{color:"#f35631",fontWeight:"600"},"& .super-app.positive":{color:"#10b983",fontWeight:"600"}},children:(0,h.jsx)(c.z,{rows:m,disableColumnSelector:!0,columns:x,isRowSelectable:e=>e._id,components:{Toolbar:function(){return(0,h.jsxs)(i.b,{sx:{padding:"1px"},children:[(0,h.jsx)(s.j,{sx:{padding:"14px"},onResize:void 0,nonce:void 0,onResizeCapture:void 0}),(0,h.jsx)(o.Q,{sx:{padding:"14px"},onResize:void 0,nonce:void 0,onResizeCapture:void 0}),(0,h.jsx)(l.z,{sx:{padding:"14px"},onResize:void 0,nonce:void 0,onResizeCapture:void 0}),(0,h.jsx)(d.qn,{sx:{padding:"14px"}})]})}},density:"compact",pageSize:u,onPageSizeChange:e=>g(e),getRowId:e=>e._id,rowsPerPageOptions:[5,10,20,100]})})}},73876:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(99735),n=a(70579);const i=(0,r.A)((0,n.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos")},97851:(e,t,a)=>{a.d(t,{A:()=>v});var r=a(98587),n=a(58168),i=a(65043),s=a(43024),o=a(31970),l=a(56172),d=a(46141),c=a(69354),p=a(96036);function h(e){return(0,p.A)("MuiCardHeader",e)}const u=(0,a(31748).A)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var g=a(70579);const x=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,n.A)({[`& .${u.title}`]:t.title,[`& .${u.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),m=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),y=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),f=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),v=i.forwardRef((function(e,t){const a=(0,d.A)({props:e,name:"MuiCardHeader"}),{action:i,avatar:c,className:p,component:u="div",disableTypography:v=!1,subheader:A,subheaderTypographyProps:b,title:w,titleTypographyProps:j}=a,C=(0,r.A)(a,["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"]),N=(0,n.A)({},a,{component:u,disableTypography:v}),T=(e=>{const{classes:t}=e;return(0,o.A)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},h,t)})(N);let S=w;null==S||S.type===l.A||v||(S=(0,g.jsx)(l.A,(0,n.A)({variant:c?"body2":"h5",className:T.title,component:"span",display:"block"},j,{children:S})));let R=A;return null==R||R.type===l.A||v||(R=(0,g.jsx)(l.A,(0,n.A)({variant:c?"body2":"body1",className:T.subheader,color:"text.secondary",component:"span",display:"block"},b,{children:R}))),(0,g.jsxs)(x,(0,n.A)({className:(0,s.A)(T.root,p),as:u,ref:t,styleProps:N},C,{children:[c&&(0,g.jsx)(m,{className:T.avatar,styleProps:N,children:c}),(0,g.jsxs)(f,{className:T.content,styleProps:N,children:[S,R]}),i&&(0,g.jsx)(y,{className:T.action,styleProps:N,children:i})]}))}))}}]);
//# sourceMappingURL=637.675d57e8.chunk.js.map