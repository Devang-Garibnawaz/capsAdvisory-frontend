"use strict";(self.webpackChunktred_code_portal=self.webpackChunktred_code_portal||[]).push([[569],{33569:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var n=a(65043),r=a(76472),o=a(81683),s=a(18599),i=a(54),d=a(48073),l=a(98112),c=a(43613),p=a(16543),g=a(97851),h=a(47375),u=a(47084),x=a(34562),f=a(54833),m=a(96094),A=a(39155),v=a(86064),y=a(13117),w=a(27273),j=a(48251),b=a(40632),C=a(70579);const T=e=>{let{loginUsersData:t=[],columns:a=[]}=e;const[r,o]=n.useState(20);if(0===t.length)return(0,C.jsx)(f.A,{title:"No Data Found"});return(0,C.jsx)(b.A,{sx:{height:"580px",width:"100%","& .super-app-theme--cell":{backgroundColor:"rgba(224, 183, 60, 0.55)",color:"#1a3e72",fontWeight:"600"},"& .super-app.negative":{color:"#f35631",fontWeight:"600"},"& .super-app.positive":{color:"#10b983",fontWeight:"600"}},children:(0,C.jsx)(j.z,{rows:t,disableColumnSelector:!0,columns:a,isRowSelectable:e=>e._id,components:{Toolbar:function(){return(0,C.jsxs)(m.b,{sx:{padding:"1px"},children:[(0,C.jsx)(A.j,{sx:{padding:"14px"},onResize:void 0,nonce:void 0,onResizeCapture:void 0}),(0,C.jsx)(v.Q,{sx:{padding:"14px"},onResize:void 0,nonce:void 0,onResizeCapture:void 0}),(0,C.jsx)(y.z,{sx:{padding:"14px"},onResize:void 0,nonce:void 0,onResizeCapture:void 0}),(0,C.jsx)(w.qn,{sx:{padding:"14px"}})]})}},density:"compact",pageSize:r,onPageSizeChange:e=>o(e),getRowId:e=>e._id,rowsPerPageOptions:[5,10,20,100]})})};const R=(0,a(51425).$)();var D=a(48625),N=a(11504),M=a(90637),k=a(71948),L=a(73876);const S=()=>{const e=[{field:"isTradeEnabled",headerName:"Trading",width:250,renderCell:e=>e.row.isTradeEnabled?(0,C.jsx)(s.A,{sx:{padding:"1px 6px",borderRadius:"5px",backgroundColor:"#1fa91f",color:"#ffff",borderColor:"ffff"},variant:"outlined",onClick:()=>F(e.row),children:"Trading is On"}):(0,C.jsx)(s.A,{sx:{padding:"1px 6px",borderRadius:"5px",backgroundColor:"#e33838",color:"#ffff",borderColor:"ffff"},variant:"outlined",onClick:()=>F(e.row),children:"Trading is Off"})},{field:"clientId",headerName:"Client Code",width:250,align:"left"},{field:"name",headerName:"Client Name",width:250,align:"left"},{field:"loginDateAndTime",headerName:"Login Date Time",headerAlign:"center",width:310,align:"left",valueGetter:e=>{const t=new Date(e.row.loginDateAndTime);let a=t.getHours(),n=t.getMinutes();var r=a>=12?"pm":"am";return a%=12,a=a||12,n=n<10?0+n:n,t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+"  "+a+":"+(n<10?"0":"")+n+" "+r}}],t=(0,x.dh)(),[a,f]=(0,n.useState)(),[m,A]=(0,n.useState)(!1),[v,y]=(0,n.useState)(new Date),[w,j]=(0,n.useState)(!1),b=async()=>{const e=await async function(e){try{let t=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();const a=await fetch(`${R}users/getLoginUsers?date=${t}`);return(await a.json()).usersData}catch(t){throw console.log("Error fetching data:",t),new Error("Failed to fetch data")}}(v);f(e)},S=e=>{if("prev"===e){const e=new Date(v.getTime()-864e5);y(e)}else if("next"===e){const e=new Date(v.getTime()+864e5);y(e)}};n.useEffect((()=>{(async()=>{try{A(!0),await b(),A(!1)}catch(e){A(!1),t.error(e.message)}})();const e=`${v.getDate()}-${v.getMonth()}-${v.getFullYear()}`,a=`${(new Date).getDate()}-${(new Date).getMonth()}-${(new Date).getFullYear()}`;j(e==a)}),[v]);const F=async e=>{try{const a=await async function(e,t){try{const a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientCode:e,trade:t})},n=await fetch(`${R}users/tradeToggle`,a);return await n.json()}catch(a){throw console.log("Error trade toggle:",a),new Error("Failed to toggle trade for user")}}(e.clientId,!e.isTradeEnabled);null!==a&&void 0!==a&&a.status?(t.success("Trade toggle done!"),b()):t.error(null===a||void 0===a?void 0:a.message),console.log(a)}catch(a){t.error("Something went wrong: "+(null===a||void 0===a?void 0:a.message))}};return(0,C.jsxs)(n.Fragment,{children:[(0,C.jsx)(r.A,{children:(0,C.jsx)(o.A,{title:"Login Users"})}),(0,C.jsxs)(i.A,{container:!0,spacing:4,children:[(0,C.jsxs)(i.A,{item:!0,sm:8,children:[(0,C.jsx)(N.A,{label:"Date",onChange:e=>(e=>{y(e)})(e),inputFormat:"dd/MM/yyyy",disableFuture:!0,shouldDisableDate:e=>0===e.getDay()||6===e.getDay(),value:v,renderInput:e=>(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d.A,{onClick:()=>S("prev"),"aria-label":"previous",style:{height:"fit-content",width:"fit-content",marginTop:"25px",marginRight:"2px",paddingRight:"0px",borderRadius:"10px"},children:m?(0,C.jsx)(l.A,{style:{height:"15px",width:"15px"}}):(0,C.jsx)(k.A,{style:{height:"15px",width:"15px"}})}),(0,C.jsx)(c.A,{...e,id:"date",margin:"normal",name:"start"}),(0,C.jsx)(d.A,{disabled:w,onClick:()=>S("next"),"aria-label":"next",style:{height:"fit-content",width:"fit-content",marginTop:"25px",marginLeft:"0px",paddingLeft:"4px",borderRadius:"10px"},children:m?(0,C.jsx)(l.A,{style:{height:"15px",width:"15px"}}):(0,C.jsx)(L.A,{style:{height:"15px",width:"15px"}})})]})}),(0,C.jsx)(M.A,{sx:{marginLeft:"10px",marginTop:"15px",width:"fit-content"},loading:m,onClick:b,children:(0,C.jsx)(D.A,{})}),(0,C.jsx)(M.A,{sx:{marginLeft:"10px",marginTop:"15px",width:"fit-content"},variant:"outlined",loading:m,onClick:async()=>{try{A(!0);const e=await async function(){try{const e=await fetch(`${R}users/autoLoginAngel`,{method:"POST"});return await e.json()}catch(e){throw console.log("Error fetching data:",e),new Error("Failed to fetch data")}}();null!==e&&void 0!==e&&e.status&&(t.success("Auto Login Users Completed!"),b())}catch(e){t.error("Something went wrong:")}finally{A(!1)}},children:"Auto Login Users"})]}),(0,C.jsx)(i.A,{item:!0,sm:12,sx:{display:"content"},children:(0,C.jsx)(i.A,{item:!0,sm:12,sx:{paddingLeft:"20px !important"},children:(0,C.jsxs)(p.A,{variant:"outlined",sx:{padding:"20px"},children:[(0,C.jsx)(g.A,{title:"Login Users List",sx:{padding:"5px 24px 0 24px"}}),(0,C.jsx)(h.A,{sx:{padding:"10px !important"},children:m?(0,C.jsx)(u.A,{animation:"wave"}):(0,C.jsx)(T,{columns:e,loginUsersData:a})})]})})})]})]})}},40632:(e,t,a)=>{a.d(t,{A:()=>f});var n=a(58168),r=a(98587),o=a(65043);function s(e){var t,a,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(a=s(e[t]))&&(n&&(n+=" "),n+=a)}else for(a in e)e[a]&&(n&&(n+=" "),n+=a);return n}const i=function(){for(var e,t,a=0,n="",r=arguments.length;a<r;a++)(e=arguments[a])&&(t=s(e))&&(n&&(n+=" "),n+=t);return n};var d=a(7518),l=a(58812),c=a(18698),p=a(45527),g=a(70579);const h=["className","component"];var u=a(79386);const x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:a,defaultClassName:s="MuiBox-root",generateClassName:u}=e,x=(0,d.Ay)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(l.A);return o.forwardRef((function(e,o){const d=(0,p.A)(a),l=(0,c.A)(e),{className:f,component:m="div"}=l,A=(0,r.A)(l,h);return(0,g.jsx)(x,(0,n.A)({as:m,ref:o,className:i(f,u?u(s):s),theme:t&&d[t]||d},A))}))}({defaultTheme:(0,a(88279).A)(),defaultClassName:"MuiBox-root",generateClassName:u.A.generate}),f=x},48625:(e,t,a)=>{var n=a(24994);t.A=void 0;var r=n(a(40039)),o=a(70579),s=(0,r.default)((0,o.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");t.A=s},71948:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(99735),r=a(70579);const o=(0,n.A)((0,r.jsx)("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos")},73876:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(99735),r=a(70579);const o=(0,n.A)((0,r.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos")},97851:(e,t,a)=>{a.d(t,{A:()=>v});var n=a(98587),r=a(58168),o=a(65043),s=a(43024),i=a(31970),d=a(56172),l=a(46141),c=a(69354),p=a(96036);function g(e){return(0,p.A)("MuiCardHeader",e)}const h=(0,a(31748).A)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var u=a(70579);const x=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,r.A)({[`& .${h.title}`]:t.title,[`& .${h.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),f=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),m=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),A=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),v=o.forwardRef((function(e,t){const a=(0,l.A)({props:e,name:"MuiCardHeader"}),{action:o,avatar:c,className:p,component:h="div",disableTypography:v=!1,subheader:y,subheaderTypographyProps:w,title:j,titleTypographyProps:b}=a,C=(0,n.A)(a,["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"]),T=(0,r.A)({},a,{component:h,disableTypography:v}),R=(e=>{const{classes:t}=e;return(0,i.A)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},g,t)})(T);let D=j;null==D||D.type===d.A||v||(D=(0,u.jsx)(d.A,(0,r.A)({variant:c?"body2":"h5",className:R.title,component:"span",display:"block"},b,{children:D})));let N=y;return null==N||N.type===d.A||v||(N=(0,u.jsx)(d.A,(0,r.A)({variant:c?"body2":"body1",className:R.subheader,color:"text.secondary",component:"span",display:"block"},w,{children:N}))),(0,u.jsxs)(x,(0,r.A)({className:(0,s.A)(R.root,p),as:h,ref:t,styleProps:T},C,{children:[c&&(0,u.jsx)(f,{className:R.avatar,styleProps:T,children:c}),(0,u.jsxs)(A,{className:R.content,styleProps:T,children:[D,N]}),o&&(0,u.jsx)(m,{className:R.action,styleProps:T,children:o})]}))}))}}]);
//# sourceMappingURL=569.a3bef2f9.chunk.js.map